import{E as H,F as R,I as W,K as q,L as I,a as z,f as B}from"./chunk-UINAX72C.js";import{$b as V,Ba as P,Ea as s,Fa as d,Ma as N,Q as S,Sa as w,V as M,Va as g,W as m,Za as b,Zb as $,_ as p,_a as T,ab as A,bb as F,cb as i,db as o,eb as c,gb as O,ha as x,hb as h,ia as _,ib as L,nb as E,ob as r,pb as j,sb as u,ub as D}from"./chunk-TMVVO5PM.js";import{e as U}from"./chunk-ACKELEN3.js";var f=(()=>{class e{_auth=m(R);get authState$(){return W(this._auth)}get currentUser(){return H().currentUser}logOut(){return q(this._auth)}static \u0275fac=function(n){return new(n||e)};static \u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var v=(()=>{class e{http;authService;apiUrl="https://linkshortenerapi.onrender.com";outputsList=N([]);constructor(t,n){this.http=t,this.authService=n}shortLink(t,n){return this.http.post(`${this.apiUrl}/shorten`,{originalUrl:t,userId:n})}getUserLinks(){let t=this.authService.getUserId();if(!t){console.log("El usuario es un anon");return}return this.http.get(`${this.apiUrl}/mylinks/${t}`).subscribe({next:n=>{if(n&&n.urls){let a=n.urls.map(l=>({shortLink:`${this.apiUrl}/${l.id}`,originalLink:l.originalUrl,img:`https://www.google.com/s2/favicons?sz=64&domain_url=${l.originalUrl}`,date:new Date(l.createdAt).getTime()}));this.outputsList.set(a)}}})}generateOutput(t,n,a){let l={shortLink:n,originalLink:a,img:t,date:Date.now()};this.outputsList.set([...this.outputsList(),l])}getOutputsList(){return this.outputsList()}static \u0275fac=function(n){return new(n||e)(M(z),M(I))};static \u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var K=(()=>{class e{apiService;authService;constructor(t,n){this.apiService=t,this.authService=n}shortLink(t){let n=this.authService.getUserId()||null;this.apiService.shortLink(t,n).subscribe({next:a=>{this.apiService.generateOutput(a.favicon,a.shortUrl,t)},error:a=>{console.log(a)}})}static \u0275fac=function(n){return new(n||e)(d(v),d(I))};static \u0275cmp=p({type:e,selectors:[["app-link-input"]],standalone:!0,features:[u],decls:9,vars:0,consts:[["mainInput",""],[1,"linkImputContCont","shadow"],[1,"win","linkImputCont","alignItems"],[1,"material-icons"],["type","text","placeholder","Inroduce a link",3,"keydown.enter"],[3,"click"]],template:function(n,a){if(n&1){let l=O();i(0,"div",1)(1,"div",2)(2,"i",3),r(3,"link"),o(),i(4,"input",4,0),h("keydown.enter",function(){x(l);let y=E(5);return _(a.shortLink(y.value))}),o(),i(6,"button",5),h("click",function(){x(l);let y=E(5);return _(a.shortLink(y.value))}),i(7,"i",3),r(8,"subdirectory_arrow_right"),o()()()()}},styles:[".linkImputCont[_ngcontent-%COMP%]{width:100vw;transition:all ease .1s;padding:6px;width:100%;background-color:var(--d)}.linkImputCont[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.linkImputContCont[_ngcontent-%COMP%]:focus-within{padding:2px;background:#ef6e4e;background:linear-gradient(90deg,#ff8d70,#ef6e4e)}.linkImputContCont[_ngcontent-%COMP%]:focus-within   .linkImputCont[_ngcontent-%COMP%]{padding:4px}.linkImputContCont[_ngcontent-%COMP%]{margin:0 auto;width:360px;border-radius:8px;background-color:var(--d);transition:all ease .1s}"]})}return e})();var tt=e=>({rightSideExpanded:e});function et(e,C){e&1&&(i(0,"div",0)(1,"a",8),r(2,"Log In"),o(),i(3,"a",9),r(4,"Sign In"),o()())}function nt(e,C){if(e&1){let t=O();i(0,"div",0)(1,"a",10),h("click",function(){x(t);let a=L();return _(a.logOut())}),r(2,"Log Out"),o()()}}var Q=(()=>{class e{authService;_authState=m(f);_router=m(B);isNavbarClosed=!0;isLoggedIn=!1;constructor(t){this.authService=t}ngOnInit(){this.authService.authState$.subscribe({next:t=>{this.isLoggedIn=!!t},error:t=>{console.error("Error al obtener el estado de autenticaci\xF3n:",t)}})}toggleNav(){this.isNavbarClosed=!this.isNavbarClosed}logOut(){return U(this,null,function*(){yield this._authState.logOut(),this._router.navigateByUrl("/auth/log-in")})}static \u0275fac=function(n){return new(n||e)(d(f))};static \u0275cmp=p({type:e,selectors:[["app-navbar"]],standalone:!0,features:[u],decls:17,vars:4,consts:[[1,"win","winDark"],[1,"flex","gap12","navRightSide",3,"ngClass"],[1,"win","winLight","hfull"],["href","/about"],["href","https://github.com/Franco-Pertusati/linkShortener.git"],["href",""],[1,"winDark","sandwichBtn",3,"click"],[1,"material-icons"],["href","/auth/log-in"],["href","/auth/sign-in",1,"colorM"],["href","/auth/log-in",3,"click"]],template:function(n,a){n&1&&(i(0,"nav")(1,"div",0)(2,"h1"),r(3,"Linktun"),o()(),i(4,"div",1)(5,"div",2)(6,"a",3),r(7,"About"),o(),i(8,"a",4),r(9,"GitHub"),o(),i(10,"a",5),r(11,"Account"),o()(),w(12,et,5,0,"div",0)(13,nt,3,0,"div",0),o(),i(14,"button",6),h("click",function(){return a.toggleNav()}),i(15,"i",7),r(16,"menu"),o()()()),n&2&&(s(4),g("ngClass",D(2,tt,!a.isNavbarClosed)),s(8),b(a.isLoggedIn?13:12))},dependencies:[V,$],styles:[".sandwichBtn[_ngcontent-%COMP%]{display:none}nav[_ngcontent-%COMP%]{width:100vw;margin-bottom:64px;padding:12px;gap:12px;display:flex;justify-content:center}@media (max-width: 500px){.navRightSide[_ngcontent-%COMP%]{padding:20px 0;width:100%;flex-direction:column;gap:8px;position:absolute;left:0;top:-500px;background-color:var(--e);border-bottom:solid 1px var(--d);box-shadow:0 4px 8px #0003;transition:all ease .5s}.sandwichBtn[_ngcontent-%COMP%]{height:42px;margin-left:auto;display:inherit;position:absolute;right:10px}nav[_ngcontent-%COMP%]   .rightSideExpanded[_ngcontent-%COMP%]{top:0}nav[_ngcontent-%COMP%]   .rightSideExpanded[_ngcontent-%COMP%]   .win[_ngcontent-%COMP%]{padding:0;background-color:transparent;border-style:none;display:flex;flex-direction:column}nav[_ngcontent-%COMP%]   .rightSideExpanded[_ngcontent-%COMP%]   .win[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:2rem;font-weight:bolder}}"]})}return e})();function it(e,C){if(e&1&&(i(0,"div",1),c(1,"img",2),o(),i(2,"div",3)(3,"div")(4,"div",4)(5,"a",5),r(6),o(),i(7,"button")(8,"i",6),r(9,"content_copy"),o()(),i(10,"button")(11,"i",6),r(12,"qr_code"),o()(),i(13,"button")(14,"i",6),r(15,"trending_up"),o()()()(),i(16,"span",7),r(17),o()()),e&2){let t=L();s(),g("src",t.img,P),s(4),g("href",t.shortedLink,P),s(),j(t.shortedLink),s(11),j(t.originalLink)}}function ot(e,C){e&1&&(c(0,"div",1),i(1,"div",8),c(2,"div",9)(3,"div",9),o())}var X=(()=>{class e{originalLink="";shortedLink="";img="";static \u0275fac=function(n){return new(n||e)};static \u0275cmp=p({type:e,selectors:[["app-output"]],inputs:{originalLink:"originalLink",shortedLink:"shortedLink",img:"img"},standalone:!0,features:[u],decls:3,vars:1,consts:[[1,"card","shadow"],[1,"linkImg"],["alt","",3,"src"],[1,"linkdata"],[1,"linkOptions"],["target","_blank",1,"newl",3,"href"],[1,"material-icons"],[1,"oriL"],[1,"flex","flexColumn","wfull"],[1,"skele"]],template:function(n,a){n&1&&(i(0,"div",0),w(1,it,18,4)(2,ot,4,0),o()),n&2&&(s(),b(a.shortedLink?1:2))},styles:[".card[_ngcontent-%COMP%]{margin:12px auto;padding:12px;border-radius:8px;display:flex;gap:12px;max-width:360px;position:relative;background-color:var(--d);justify-self:center}.linkImg[_ngcontent-%COMP%]{min-width:50px;height:50px;border-radius:25px;border:solid 1px var(--c);display:flex;justify-content:center;align-items:center;background-color:var(--c)}.linkImg[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:30px}.linkdata[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;justify-content:space-between;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.linkdata[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.newl[_ngcontent-%COMP%]{font-weight:700;font-size:1.8rem}.oriL[_ngcontent-%COMP%]{font-size:1.4rem}.linkOptions[_ngcontent-%COMP%]{display:flex;gap:4px}.linkOptions[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem}.linkOptions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:auto 0;padding:4px;display:flex;border-radius:50%;border:solid 1px var(--c);background:var(--d);justify-self:end}.linkOptions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:var(--d0)}.skele[_ngcontent-%COMP%]{margin:4px;width:100%;height:100%;background-color:var(--c);border-radius:8px}a[_ngcontent-%COMP%]{padding:0}a[_ngcontent-%COMP%]:hover{text-shadow:none}"]})}return e})();function rt(e,C){if(e&1&&c(0,"app-output",4),e&2){let t=C.$implicit;g("img",t.img)("originalLink",t.originalLink)("shortedLink",t.shortLink)}}var Mt=(()=>{class e{authService;api;isLoggedIn=!1;constructor(t,n){this.authService=t,this.api=n}ngOnInit(){this.authService.authState$.subscribe({next:t=>{this.isLoggedIn=!!t,this.isLoggedIn&&this.api.getUserLinks()},error:t=>{console.error("Error al obtener el estado de autenticaci\xF3n:",t)}})}outputsList=m(v).outputsList;static \u0275fac=function(n){return new(n||e)(d(f),d(v))};static \u0275cmp=p({type:e,selectors:[["app-home"]],standalone:!0,features:[u],decls:30,vars:0,consts:[[1,"featuresList"],[1,"flex","gap8","alignItems"],[1,"material-icons","roundedIcon"],[1,"linkList"],[3,"img","originalLink","shortedLink"],[1,"winLight","win","bottomCard","shadow"],["href","/auth/sign-in"]],template:function(n,a){n&1&&(i(0,"div"),c(1,"app-navbar"),i(2,"section")(3,"h2"),r(4,"An open source link shortener"),o()(),i(5,"section")(6,"div",0)(7,"div",1)(8,"i",2),r(9,"check"),o(),i(10,"span"),r(11,"No ads during redirection"),o()(),i(12,"div",1)(13,"i",2),r(14,"check"),o(),i(15,"span"),r(16,"Without the need to create an account"),o()()()(),i(17,"section")(18,"div"),c(19,"app-link-input"),o()(),i(20,"section")(21,"div",3),A(22,rt,1,3,"app-output",4,T),c(24,"app-output"),i(25,"div",5)(26,"span"),r(27,"Want to save your links, edit them, or view their analytics? Create a free account "),o(),i(28,"a",6),r(29,"here."),o()()()()()),n&2&&(s(22),F(a.outputsList()))},dependencies:[K,X,Q]})}return e})();export{f as a,Mt as b};
