import{a as f}from"./chunk-O6VQ4C2T.js";import{a as P}from"./chunk-A5XE4AUN.js";import{a as J,f as Q}from"./chunk-AOLNICQB.js";import{$ as U,$b as q,Ba as E,Ea as l,Fa as d,Ma as H,Q as S,R as A,Sa as O,Sb as W,T as F,V as C,Va as m,W as _,Za as I,Zb as Y,_ as u,_a as V,aa as B,ab as R,bb as G,cb as o,db as r,eb as p,gb as L,ha as x,hb as g,ia as k,ib as M,nb as T,ob as a,pa as $,pb as j,qa as z,qb as Z,sb as h,ub as K}from"./chunk-TMVVO5PM.js";import{e as N}from"./chunk-ACKELEN3.js";var v=(()=>{class n{http;authService;apiUrl="https://linkshortenerapi.onrender.com";outputsList=H([]);constructor(t,e){this.http=t,this.authService=e}shortLink(t,e){return this.http.post(`${this.apiUrl}/shorten`,{originalUrl:t,userId:e})}generateOutput(t){let e={shortLink:t.shortUrl,originalLink:t.originalUrl,img:`https://www.google.com/s2/favicons?sz=64&domain_url=${t.originalUrl}`,date:new Date(t.createdAt).getTime(),clicks:0},i=this.outputsList();this.outputsList.set([...i,e])}getUserLinks(){let t=this.authService.getUserId();if(!t){console.log("El usuario es un anon");return}return this.http.get(`${this.apiUrl}/mylinks/${t}`).subscribe({next:e=>{if(e&&e.urls){let i=e.urls.map(c=>({shortLink:`${this.apiUrl}/${c.id}`,originalLink:c.originalUrl,img:`https://www.google.com/s2/favicons?sz=64&domain_url=${c.originalUrl}`,date:new Date(c.createdAt).getTime(),clicks:c.clicks}));this.outputsList.set(i)}}})}getOutputsList(){return this.outputsList()}static \u0275fac=function(e){return new(e||n)(C(J),C(P))};static \u0275prov=S({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var tt=(()=>{class n{apiService;authService;constructor(t,e){this.apiService=t,this.authService=e}shortLink(t){let e=this.authService.getUserId()||null;this.apiService.shortLink(t,e).subscribe({next:i=>{this.apiService.generateOutput(i),console.log(i)},error:i=>{console.log(i)}})}static \u0275fac=function(e){return new(e||n)(d(v),d(P))};static \u0275cmp=u({type:n,selectors:[["app-link-input"]],standalone:!0,features:[h],decls:9,vars:0,consts:[["mainInput",""],[1,"linkImputContCont","shadow"],[1,"win","linkImputCont","alignItems"],[1,"material-icons"],["type","text","placeholder","Inroduce a link",3,"keydown.enter"],[3,"click"]],template:function(e,i){if(e&1){let c=L();o(0,"div",1)(1,"div",2)(2,"i",3),a(3,"link"),r(),o(4,"input",4,0),g("keydown.enter",function(){x(c);let w=T(5);return i.shortLink(w.value),k(w.value="")}),r(),o(6,"button",5),g("click",function(){x(c);let w=T(5);return k(i.shortLink(w.value))}),o(7,"i",3),a(8,"subdirectory_arrow_right"),r()()()()}},styles:[".linkImputCont[_ngcontent-%COMP%]{width:100vw;transition:all ease .1s;padding:6px;width:100%;background-color:var(--d)}.linkImputCont[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.linkImputContCont[_ngcontent-%COMP%]:focus-within{padding:2px;background:#ef6e4e;background:linear-gradient(90deg,#ff8d70,#ef6e4e)}.linkImputContCont[_ngcontent-%COMP%]:focus-within   .linkImputCont[_ngcontent-%COMP%]{padding:4px}.linkImputContCont[_ngcontent-%COMP%]{margin:0 auto;width:360px;border-radius:8px;background-color:var(--d);transition:all ease .1s}"]})}return n})();var st=n=>({rightSideExpanded:n});function ct(n,s){n&1&&(o(0,"div",0)(1,"a",8),a(2,"Log In"),r(),o(3,"a",9),a(4,"Sign In"),r()())}function lt(n,s){if(n&1){let t=L();o(0,"div",0)(1,"a",10),g("click",function(){x(t);let i=M();return k(i.logOut())}),a(2,"Log Out"),r()()}}var et=(()=>{class n{authService;_authState=_(f);_router=_(Q);isNavbarClosed=!0;isLoggedIn=!1;constructor(t){this.authService=t}ngOnInit(){this.authService.authState$.subscribe({next:t=>{this.isLoggedIn=!!t},error:t=>{console.error("Error al obtener el estado de autenticaci\xF3n:",t)}})}toggleNav(){this.isNavbarClosed=!this.isNavbarClosed}logOut(){return N(this,null,function*(){yield this._authState.logOut(),this._router.navigateByUrl("/auth/log-in")})}static \u0275fac=function(e){return new(e||n)(d(f))};static \u0275cmp=u({type:n,selectors:[["app-navbar"]],standalone:!0,features:[h],decls:17,vars:4,consts:[[1,"win","winDark"],[1,"flex","gap12","navRightSide",3,"ngClass"],[1,"win","winLight","hfull"],["href","/about"],["href","https://github.com/Franco-Pertusati/linkShortener.git"],["href",""],[1,"winDark","sandwichBtn",3,"click"],[1,"material-icons"],["href","/auth/log-in"],["href","/auth/sign-in",1,"colorM"],["href","/auth/log-in",3,"click"]],template:function(e,i){e&1&&(o(0,"nav")(1,"div",0)(2,"h1"),a(3,"Linktun"),r()(),o(4,"div",1)(5,"div",2)(6,"a",3),a(7,"About"),r(),o(8,"a",4),a(9,"GitHub"),r(),o(10,"a",5),a(11,"Account"),r()(),O(12,ct,5,0,"div",0)(13,lt,3,0,"div",0),r(),o(14,"button",6),g("click",function(){return i.toggleNav()}),o(15,"i",7),a(16,"menu"),r()()()),e&2&&(l(4),m("ngClass",K(2,st,!i.isNavbarClosed)),l(8),I(i.isLoggedIn?13:12))},dependencies:[q,Y],styles:[".sandwichBtn[_ngcontent-%COMP%]{display:none}nav[_ngcontent-%COMP%]{width:100vw;margin-bottom:64px;padding:12px;gap:12px;display:flex;justify-content:center}@media (max-width: 500px){.navRightSide[_ngcontent-%COMP%]{padding:20px 0;width:100%;flex-direction:column;gap:8px;position:absolute;left:0;top:-500px;background-color:var(--e);border-bottom:solid 1px var(--d);box-shadow:0 4px 8px #0003;transition:all ease .5s}.sandwichBtn[_ngcontent-%COMP%]{height:42px;margin-left:auto;display:inherit;position:absolute;right:10px}nav[_ngcontent-%COMP%]   .rightSideExpanded[_ngcontent-%COMP%]{top:0}nav[_ngcontent-%COMP%]   .rightSideExpanded[_ngcontent-%COMP%]   .win[_ngcontent-%COMP%]{padding:0;background-color:transparent;border-style:none;display:flex;flex-direction:column}nav[_ngcontent-%COMP%]   .rightSideExpanded[_ngcontent-%COMP%]   .win[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:2rem;font-weight:bolder}}"]})}return n})();var D=class{constructor(s,t){this._document=t;let e=this._textarea=this._document.createElement("textarea"),i=e.style;i.position="fixed",i.top=i.opacity="0",i.left="-999em",e.setAttribute("aria-hidden","true"),e.value=s,e.readOnly=!0,(this._document.fullscreenElement||this._document.body).appendChild(e)}copy(){let s=this._textarea,t=!1;try{if(s){let e=this._document.activeElement;s.select(),s.setSelectionRange(0,s.value.length),t=this._document.execCommand("copy"),e&&e.focus()}}catch{}return t}destroy(){let s=this._textarea;s&&(s.remove(),this._textarea=void 0)}},dt=(()=>{class n{constructor(t){this._document=t}copy(t){let e=this.beginCopy(t),i=e.copy();return e.destroy(),i}beginCopy(t){return new D(t,this._document)}static{this.\u0275fac=function(e){return new(e||n)(C(W))}}static{this.\u0275prov=S({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),pt=new F("CDK_COPY_TO_CLIPBOARD_CONFIG"),nt=(()=>{class n{constructor(t,e,i){this._clipboard=t,this._ngZone=e,this.text="",this.attempts=1,this.copied=new $,this._pending=new Set,i&&i.attempts!=null&&(this.attempts=i.attempts)}copy(t=this.attempts){if(t>1){let e=t,i=this._clipboard.beginCopy(this.text);this._pending.add(i);let c=()=>{let b=i.copy();!b&&--e&&!this._destroyed?this._currentTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(c,1)):(this._currentTimeout=null,this._pending.delete(i),i.destroy(),this.copied.emit(b))};c()}else this.copied.emit(this._clipboard.copy(this.text))}ngOnDestroy(){this._currentTimeout&&clearTimeout(this._currentTimeout),this._pending.forEach(t=>t.destroy()),this._pending.clear(),this._destroyed=!0}static{this.\u0275fac=function(e){return new(e||n)(d(dt),d(z),d(pt,8))}}static{this.\u0275dir=B({type:n,selectors:[["","cdkCopyToClipboard",""]],hostBindings:function(e,i){e&1&&g("click",function(){return i.copy()})},inputs:{text:[0,"cdkCopyToClipboard","text"],attempts:[0,"cdkCopyToClipboardAttempts","attempts"]},outputs:{copied:"cdkCopyToClipboardCopied"},standalone:!0})}}return n})(),it=(()=>{class n{static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275mod=U({type:n})}static{this.\u0275inj=A({})}}return n})();function mt(n,s){if(n&1&&(o(0,"div",1),p(1,"img",2),r(),o(2,"div",3)(3,"div")(4,"div",4)(5,"a",5),a(6),r(),o(7,"button",6)(8,"i",7),a(9,"content_copy"),r()(),o(10,"button")(11,"i",7),a(12,"qr_code"),r()(),o(13,"span",8),a(14),r()()(),o(15,"span",9),a(16),r()()),n&2){let t=M();l(),m("src",t.img,E),l(4),m("href",t.shortedLink,E),l(),j(t.shortedLink),l(),m("cdkCopyToClipboard",t.shortedLink),l(7),Z("Clicks: ",t.clicks,""),l(2),j(t.originalLink)}}function gt(n,s){n&1&&(p(0,"div",1),o(1,"div",10),p(2,"div",11)(3,"div",11),r())}var ot=(()=>{class n{originalLink="";shortedLink="";img="";clicks=0;static \u0275fac=function(e){return new(e||n)};static \u0275cmp=u({type:n,selectors:[["app-output"]],inputs:{originalLink:"originalLink",shortedLink:"shortedLink",img:"img",clicks:"clicks"},standalone:!0,features:[h],decls:3,vars:1,consts:[[1,"card","shadow"],[1,"linkImg"],["alt","",3,"src"],[1,"linkdata"],[1,"linkOptions"],["target","_blank",1,"newl",3,"href"],[3,"cdkCopyToClipboard"],[1,"material-icons"],[2,"align-self","center"],[1,"oriL"],[1,"flex","flexColumn","wfull"],[1,"skele"]],template:function(e,i){e&1&&(o(0,"div",0),O(1,mt,17,6)(2,gt,4,0),r()),e&2&&(l(),I(i.shortedLink?1:2))},dependencies:[it,nt],styles:[".card[_ngcontent-%COMP%]{margin:12px auto;padding:12px;border-radius:8px;display:flex;gap:12px;max-width:360px;position:relative;background-color:var(--d);justify-self:center}.linkImg[_ngcontent-%COMP%]{min-width:50px;height:50px;border-radius:25px;border:solid 1px var(--c);display:flex;justify-content:center;align-items:center;background-color:var(--c)}.linkImg[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:30px}.linkdata[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;justify-content:space-between;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.linkdata[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.newl[_ngcontent-%COMP%]{font-weight:700;font-size:1.8rem}.oriL[_ngcontent-%COMP%]{font-size:1.4rem}.linkOptions[_ngcontent-%COMP%]{display:flex;gap:4px}.linkOptions[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem}.linkOptions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:auto 0;padding:4px;display:flex;border-radius:50%;border:solid 1px var(--c);background:var(--d);justify-self:end}.linkOptions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:var(--d0)}.skele[_ngcontent-%COMP%]{margin:4px;width:100%;height:100%;background-color:var(--c);border-radius:8px}a[_ngcontent-%COMP%]{padding:0}a[_ngcontent-%COMP%]:hover{text-shadow:none}"]})}return n})();function ht(n,s){if(n&1&&p(0,"app-output",4),n&2){let t=s.$implicit;m("img",t.img)("originalLink",t.originalLink)("shortedLink",t.shortLink)("clicks",t.clicks)}}var Gt=(()=>{class n{authService;api;isLoggedIn=!1;constructor(t,e){this.authService=t,this.api=e}ngOnInit(){this.authService.authState$.subscribe({next:t=>{this.isLoggedIn=!!t,this.isLoggedIn&&this.api.getUserLinks()},error:t=>{console.error("Error al obtener el estado de autenticaci\xF3n:",t)}})}outputsList=_(v).outputsList;static \u0275fac=function(e){return new(e||n)(d(f),d(v))};static \u0275cmp=u({type:n,selectors:[["app-home"]],standalone:!0,features:[h],decls:30,vars:0,consts:[[1,"featuresList"],[1,"flex","gap8","alignItems"],[1,"material-icons","roundedIcon"],[1,"linkList"],[3,"img","originalLink","shortedLink","clicks"],[1,"winLight","win","bottomCard","shadow"],["href","/auth/sign-in"]],template:function(e,i){e&1&&(o(0,"div"),p(1,"app-navbar"),o(2,"section")(3,"h2"),a(4,"An open source link shortener"),r()(),o(5,"section")(6,"div",0)(7,"div",1)(8,"i",2),a(9,"check"),r(),o(10,"span"),a(11,"No ads during redirection"),r()(),o(12,"div",1)(13,"i",2),a(14,"check"),r(),o(15,"span"),a(16,"Without the need to create an account"),r()()()(),o(17,"section")(18,"div"),p(19,"app-link-input"),r()(),o(20,"section")(21,"div",3),R(22,ht,1,4,"app-output",4,V),p(24,"app-output"),o(25,"div",5)(26,"span"),a(27,"Want to save your links, edit them, or view their analytics? Create a free account "),r(),o(28,"a",6),a(29,"here."),r()()()()()),e&2&&(l(22),G(i.outputsList()))},dependencies:[tt,ot,et]})}return n})();export{Gt as a};
